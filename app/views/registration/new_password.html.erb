<%= stylesheet_link_tag 'registration', media: 'all', 'data-turbolinks-track': 'reload' %>

<div id="block_new_password" class="block">
  <div id="popup-login" class="popup popup-login" style="opacity: 1; display: block;">
    <p class="message error-message validate-error-hide validate-error-login">
      <%= @user.name %>, Вы изменяете пароль аккаунта с почтой <%= @user.email %>
    </p>
    <form  method="POST" id="popup-login-form" class="pl-login form-required no-disable"
           action="<%= password_recovery_registration_path(@token) %>">
      <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
      <div class="login-input">
        <p class="password">
          <input type="password" name="password" class="textInput" placeholder="Пароль" id="password-input"
                 autocomplete="new-password" required maxlength="50" minlength="6">
          <a href="#" class="password-control" onclick="return show_hide_password(this);"></a>
        </p>
        <input type="password" name="password_confirmation" class="textInput"
               placeholder="Повтор пароля" autocomplete="new-password" minlength="6" required maxlength="50">
      </div>
      <br>
      <div class="submit submit-with-social">
        <button name="submit_login" type="submit" id="menu3" class="log">
          <span class="menu_text" id="menu_text3">Изменить<b></b><b></b></span>
        </button>
      </div>
    </form>
  </div>
</div>

<script>
    function show_hide_password(target){
        var input = document.getElementById('password-input');
        if (input.getAttribute('type') == 'password') {
            target.classList.add('view');
            input.setAttribute('type', 'text');
        } else {
            target.classList.remove('view');
            input.setAttribute('type', 'password');
        }
        return false;
    }
</script>
